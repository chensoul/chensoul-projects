server.port: 8443

spring.cloud.gateway.routes:
  - id: authorization-server
    uri: lb://authorization-server
    predicates:
      - Path=/auth/**
    filters:
      - StripPrefix=1

  - id: admin-server
    uri: lb://admin-server
    predicates:
      - Path=/monitor/**
    filters:
      - StripPrefix=1
      -
  - id: config-server
    uri: ${spring.cloud.config.uri}
    predicates:
      - Path=/config/**
    filters:
      - RewritePath=/config/(?<segment>.*), /$\{segment}

  - id: springdoc-openapi
    uri: http://localhost:${server.port}
    predicates:
      - Path=/v3/api-docs/**
    filters:
      - RewritePath=/v3/api-docs/(?<path>.*), /$\{path}/v3/api-docs

management.endpoint.gateway.enabled: true

logging:
  level:
    root: INFO
    org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator: INFO
    org.springframework.cloud.gateway: TRACE
    org.springframework.web.server.adapter.HttpWebHandlerAdapter: TRACE

springdoc:
  swagger-ui:
    use-root-path: true
    urls:
      - name: "authorization-server"
        url: "/auth/v3/api-docs"
